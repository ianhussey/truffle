% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dirt_missingness.R
\name{dirt_missingness}
\alias{dirt_missingness}
\title{Inject Missingness (Clean MCAR or Messy Encodings)}
\usage{
dirt_missingness(
  .data,
  prop = 0.05,
  dirtier = TRUE,
  pool = c(NA, "NA", -99, -999, "", "missing"),
  probs = NULL,
  col_pattern = "^X",
  seed = NULL
)
}
\arguments{
\item{.data}{A data frame.}

\item{prop}{Numeric in [0,1]. Proportion of cells to replace
in each targeted column.}

\item{dirtier}{Logical. If \code{FALSE}, use clean MCAR via
\code{missMethods::delete_MCAR()}. If \code{TRUE}, inject mixed encodings
(columns become character). Default \code{TRUE}.}

\item{pool}{Vector of replacement tokens used when \code{dirtier = TRUE}.
Defaults to \code{c(NA, "NA", -99, -999, "", "missing")}.}

\item{probs}{Optional numeric vector of the same length as \code{pool}
giving replacement probabilities (will be renormalized). If \code{NULL},
uses equal probabilities.}

\item{col_pattern}{Regular expression for selecting columns to modify
(default \code{"^X"} = columns whose names start with \code{"X"}).}

\item{seed}{Optional integer seed for reproducibility.}
}
\value{
A modified data frame:
\itemize{
\item If \code{dirtier = FALSE}: same column types as input; MCAR \code{NA}s inserted.
\item If \code{dirtier = TRUE}: targeted columns are coerced to \emph{character} and
contain a mix of encodings (e.g., \code{NA}, \code{"NA"}, \code{-99}, etc.).
}
}
\description{
Introduce missingness into columns (default: those whose names begin with \code{"X"}).
Two modes are supported:
\itemize{
\item \strong{Clean MCAR} (\code{dirtier = FALSE}): uses
\code{missMethods::delete_MCAR()} to replace a proportion of cells with
genuine \code{NA} values (no type changes).
\item \strong{Messy encodings} (\code{dirtier = TRUE}): replaces a proportion
of cells with a mixture of encodings (e.g., \code{NA}, \code{"NA"}, \code{-99},
\code{-999}, empty strings, \code{"missing"}). Targeted columns are coerced
to \emph{character} to accommodate mixed typesâ€”useful for teaching data
cleaning.
}
}
\details{
When \code{dirtier = TRUE}, approximately \code{round(prop * n)}
cells per targeted column are replaced (where \code{n} is that column's length).
The selection is independent across columns. Coercion to character preserves
\code{NA} as \code{NA_character_} while other tokens are inserted as strings.
}
\examples{
\dontrun{
set.seed(1)
df <- data.frame(id = 1:6,
                 X1 = sample(1:5, 6, TRUE),
                 X2 = sample(1:5, 6, TRUE),
                 Y  = rnorm(6))

# Clean MCAR: only genuine NA, numeric types preserved
clean <- dirt_missingness(df, prop = 0.2, dirtier = FALSE)

# Messy encodings: columns X* become character with mixed "missing" tokens
messy <- dirt_missingness(df, prop = 0.2, dirtier = TRUE,
                          pool = c(NA, "NA", -99, ""),  # customize as needed
                          seed = 42)
}

}
\seealso{
\code{\link[missMethods]{delete_MCAR}}, \code{\link[tidyselect]{starts_with}}
}
